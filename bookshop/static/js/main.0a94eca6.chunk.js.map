{"version":3,"sources":["store.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","utils/compose.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","funcs","comp","reduceRight","wrapped","f","compose","connect","bookList","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","shoppingCart","items","cartItems","total","orderTotal","item","idx","count","HomePage","CartPage","ShopHeader","listItems","to","href","length","reduce","accumulator","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateOrderTotal","quantity","updateCartItems","slice","updateOrder","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","value","basename","process","document","getElementById"],"mappings":"uSA2B8BA,E,sGCzBfC,G,MCCM,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,cAE1BC,EAIEF,EAJFE,MACAC,EAGEH,EAHFG,OACAC,EAEEJ,EAFFI,MACAC,EACEL,EADFK,WAEF,OACE,yBAAKC,UAAU,kBACb,yBAAKA,UAAU,cACb,yBAAKC,IAAKF,EAAYG,IAAI,WAE5B,yBAAKF,UAAU,gBACb,0BAAMA,UAAU,cAAcJ,GAC9B,yBAAKI,UAAU,eAAeH,GAC9B,yBAAKG,UAAU,cAAf,IAA8BF,GAC9B,4BACEK,QAASR,EACTK,UAAU,4BAFZ,mB,ECdJI,IAAMC,gBAFEC,E,EAAVC,SACUC,E,EAAVC,SCcaC,EAfc,kBAAM,SAACC,GAClC,OAAO,SAACC,GACN,OACE,kBAACJ,EAAD,MAEI,SAACK,GACC,OAAQ,kBAACF,EAAD,iBAAaC,EAAb,CACCC,iBAAkBA,WCUjCC,EAAkB,SAACC,GACvB,MAAO,CACLC,KAAM,qBACNC,QAASF,IA2BPG,EAAa,SAACL,GAAD,OAAsB,kBAAM,SAACM,GAC9CA,EAlDO,CACLH,KAAM,wBAkDRH,EAAiBO,WACdC,MAAK,SAACC,GAAD,OAAUH,EA9CX,CACLH,KAAM,sBACNC,QA4CqCK,OACpCC,OAAM,SAACC,GAAD,OAASL,EAxCX,CACLH,KAAM,sBACNC,QAsCoCO,UCpDzBC,G,MCCC,WACd,OAAO,6CCFMC,G,MCCQ,WACrB,OAAO,yCCSHC,G,MAAW,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,MAAOjC,EAAoB,EAApBA,cACzB,OACE,wBAAIK,UAAU,aACX4B,EAAMC,KAAI,SAACnC,GACV,OACE,wBAAIoC,IAAKpC,EAAKqC,IACZ,kBAAC,EAAD,CACErC,KAAMA,EACNC,cAAe,kBAAMA,EAAcD,EAAKqC,cAQhDC,E,kLAEFC,KAAKrB,MAAMM,e,+BAGH,IAAD,EAGHe,KAAKrB,MADPgB,EAFK,EAELA,MAAOM,EAFF,EAEEA,QAASC,EAFX,EAEWA,MAAOxC,EAFlB,EAEkBA,cAGzB,OAAIuC,EACK,kBAAC,EAAD,MAGLC,EACK,kBAAC,EAAD,MAGF,kBAAC,EAAD,CACLP,MAAOA,EACPjC,cAAeA,Q,GApBWyC,aC3BjBT,ECFC,sCAAIU,EAAJ,yBAAIA,EAAJ,uBAAc,SAACC,GAC7B,OAAOD,EAAME,aACX,SAACC,EAASC,GAAV,OAAgBA,EAAED,KAAUF,IFyEjBI,CACbhC,IACAiC,aAxBsB,SAAC,GAA6C,IAAD,IAA1CC,SACzB,MAAO,CAAEhB,MAD0D,EAA9BA,MACrBM,QADmD,EAAvBA,QACnBC,MAD0C,EAAdA,UAa5B,SAAChB,EAAD,GAAqC,IAAxBN,EAAuB,EAAvBA,iBACtC,OAAO,eACFgC,YAAmB,CACpB3B,WAAYA,EAAWL,GACvBlB,cAAemB,GACdK,OAIQuB,CAGbV,GGJIc,G,MAAqB,CACzBC,WAAYjC,EACZkC,WRjD0B,SAACjC,GAC3B,MAAO,CACLC,KAAM,yBACNC,QAASF,IQ+CXkC,SR3C8B,SAAClC,GAC/B,MAAO,CACLC,KAAM,8BACNC,QAASF,MSnCEmC,ED8EAP,aAbS,SAAC,GAAiD,IAAD,IAA9CQ,aACzB,MAAO,CACLC,MAFqE,EAA9BC,UAGvCC,MAHqE,EAAnBC,cAadT,EAAzBH,EArEW,SAAC,GAAwD,IAAtDS,EAAqD,EAArDA,MAAOE,EAA8C,EAA9CA,MAAOP,EAAuC,EAAvCA,WAAYC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,SA8BjE,OACE,yBAAKjD,UAAU,uBACb,0CACA,2BAAOA,UAAU,SACf,+BACE,4BACE,iCACA,oCACA,qCACA,qCACA,wCAIJ,+BACIoD,EAAMvB,KA5CE,SAAC2B,EAAMC,GAAS,IACxB1B,EAA4ByB,EAA5BzB,GAAInC,EAAwB4D,EAAxB5D,MAAO8D,EAAiBF,EAAjBE,MAAO5D,EAAU0D,EAAV1D,MAC1B,OACE,wBAAIgC,IAAKC,GACP,4BAAK0B,EAAM,GACX,4BAAK7D,GACL,4BAAK8D,GACL,gCAAM5D,GACN,4BACE,4BACEK,QAAS,kBAAM8C,EAASlB,IACxB/B,UAAU,6CACV,uBAAGA,UAAU,mBAEf,4BACEG,QAAS,kBAAM4C,EAAWhB,IAC1B/B,UAAU,8CACV,uBAAGA,UAAU,uBAEf,4BACEG,QAAS,kBAAM6C,EAAWjB,IAC1B/B,UAAU,8CACV,uBAAGA,UAAU,+BA0BnB,yBAAKA,UAAU,SAAf,WACWsD,OEhDFK,EATE,WACf,OACE,6BACE,kBAAC,EAAD,MACA,kBAAC,EAAD,QCFSC,EAJE,WACf,OAAO,2CCDMC,G,MCkCAlB,aAPS,SAAC,GAAiD,IAAD,IAA9CQ,aACzB,MAAO,CACLC,MAFqE,EAA9BC,UAGvCC,MAHqE,EAAnBC,cAOvCZ,EAvBI,SAAC,GAA2B,IAR7BmB,EAQ4B,IAAxBV,aAAwB,MAAhB,GAAgB,EAAZE,EAAY,EAAZA,MAChC,OACE,4BAAQtD,UAAU,mBAChB,kBAAC,IAAD,CAAM+D,GAAG,KACP,yBAAK/D,UAAU,kBAAf,aAEF,kBAAC,IAAD,CAAM+D,GAAG,SACP,yBAAK/D,UAAU,gBAAgBgE,KAAK,KAClC,uBAAGhE,UAAU,kCAfI,KADT8D,EAiBEV,GAhBJa,OACL,EAGFH,EAAUI,QAAO,SAACC,EAAaX,GAAd,OAAuBW,EAAcX,EAAKE,QAAO,GAUnE,YAE6BJ,EAF7B,WClBOc,G,MCKH,WACV,OACE,0BAAMC,KAAK,OAAOrE,UAAU,aAC1B,kBAAC,EAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOsE,KAAK,IAAIC,UAAWZ,EAAUa,OAAK,IAE1C,kBAAC,IAAD,CAAOF,KAAK,QAAQC,UAAWX,QCZxBa,E,4MCEbC,MAAQ,CACNC,UAAU,G,kEAIV1C,KAAK2C,SAAS,CAAED,UAAU,M,+BAI1B,OAAI1C,KAAKyC,MAAMC,SACN,kBAAC,EAAD,MAGF1C,KAAKrB,MAAMiE,a,GAdoBzC,aCFrB0C,E,iDACnBxD,KAAO,CACL,CACES,GAAI,EACJnC,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,WAAY,4FAEd,CACEgC,GAAI,EACJnC,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,WAAY,6F,uDAIJ,IAAD,OACT,OAAO,IAAIgF,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACLC,KAAKC,SAAW,IAClBH,EAAO,IAAII,MAAM,2BAEjBL,EAAQ,EAAK1D,QAEd,Y,aCSMgE,EApCQ,SAACZ,EAAOa,GAC7B,QAAcC,IAAVd,EACF,MAAO,CACL9C,MAAO,GACPM,SAAS,EACTC,MAAO,MAIX,OAAQoD,EAAOvE,MACb,IAAK,sBACH,MAAO,CACLY,MAAO,GACPM,SAAS,EACTC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLP,MAAO2D,EAAOtE,QACdiB,SAAS,EACTC,MAAO,MAGX,IAAK,sBACH,MAAO,CACLP,MAAO,GACPM,SAAS,EACTC,MAAOoD,EAAOtE,SAGlB,QACE,OAAOyD,EAAM9B,W,QC/Bb6C,EAAmB,SAAClC,EAAY7D,EAAMgG,GAC1C,OAAOnC,EAAa7D,EAAKI,MAAQ4F,GAG7BC,EAAkB,SAACtC,EAAWG,EAAMC,GACxC,OAAmB,IAAfD,EAAKE,MACD,GAAN,mBACKL,EAAUuC,MAAM,EAAGnC,IADxB,YAEKJ,EAAUuC,MAAMnC,EAAM,MAIhB,IAATA,EACI,GAAN,mBACKJ,GADL,CAEEG,IAIE,GAAN,mBACKH,EAAUuC,MAAM,EAAGnC,IADxB,CAEED,GAFF,YAGKH,EAAUuC,MAAMnC,EAAM,MAoBvBoC,EAAc,SAACnB,EAAO3D,EAAQ2E,GAAc,IAC5B9D,EAAqD8C,EAAjE9B,SAAYhB,MAD2B,EAC0B8C,EAA5CvB,aAAgBE,EADE,EACFA,UAAWE,EADT,EACSA,WAElD7D,EAAOkC,EAAMkE,MAAK,qBAAG/D,KAAgBhB,KACrCgF,EAAY1C,EAAU2C,WAAU,qBAAGjE,KAAgBhB,KAGnDkF,EAvBe,SAACvG,GAA+B,IAAzB8D,EAAwB,uDAAjB,GAAIkC,EAAa,yCAMhDlC,EAJFzB,UAFkD,MAE7CrC,EAAKqC,GAFwC,IAMhDyB,EAHFE,aAHkD,MAG1C,EAH0C,IAMhDF,EAFF5D,aAJkD,MAI1CF,EAAKE,MAJqC,IAMhD4D,EADF1D,aALkD,MAK1C,EAL0C,EAQpD,MAAO,CACLiC,KACAnC,QACA8D,MAAOA,EAAQgC,EACf5F,MAAOA,EAAQ4F,EAAWhG,EAAKI,OAWjBoG,CAAexG,EAFlB2D,EAAU0C,GAEoBL,GAC3C,MAAO,CACLnC,WAAYkC,EAAiBlC,EAAY7D,EAAMgG,GAC/CrC,UAAWsC,EAAgBtC,EAAW4C,EAASF,KA4BpCI,EAxBY,SAACzB,EAAOa,GACjC,QAAcC,IAAVd,EACF,MAAO,CACLrB,UAAW,GACXE,WAAY,GAIhB,OAAQgC,EAAOvE,MACb,IAAK,qBACH,OAAO6E,EAAYnB,EAAOa,EAAOtE,QAAS,GAE5C,IAAK,yBACH,OAAO4E,EAAYnB,EAAOa,EAAOtE,SAAU,GAE7C,IAAK,8BACH,IAAMuC,EAAOkB,EAAMvB,aAAaE,UAAUyC,MAAK,qBAAG/D,KAAgBwD,EAAOtE,WACzE,OAAO4E,EAAYnB,EAAOa,EAAOtE,SAAUuC,EAAKE,OAElD,QACE,OAAOgB,EAAMvB,eCnEJiD,EAPC,SAAC1B,EAAOa,GACtB,MAAO,CACL3C,SAAU0C,EAAeZ,EAAOa,GAChCpC,aAAcgD,EAAmBzB,EAAOa,K1BctCc,EAAQC,YAAYF,EAASG,YACjCC,KAXuB,kBAAM,SAACC,GAAD,OAAU,SAAClB,GACxC,OACSkB,EADa,kBAAXlB,EACG,CACVvE,KAAMuE,GAIEA,QAZQ,SAAC,GAAD,IAAGmB,EAAH,EAAGA,SAAH,OAAkB,SAACD,GAAD,OAAU,SAAClB,GAEjD,OADAoB,QAAQC,IAAIrB,EAAOvE,KAAM0F,KAClBD,EAAKlB,SA0Bdc,EAAMlF,UANwB3B,EAMM,IANM,SAAC2B,GACzC+D,YAAW,kBAAM/D,EAAS,CACxBH,KAAM,qBACJxB,MAKS6G,Q2BvBTxF,EAAmB,IAAIiE,EAE7B+B,IAASC,OACP,kBAAC,IAAD,CAAUT,MAAOA,GACf,kBAAC,EAAD,KACE,kBAAC/F,EAAD,CAA0ByG,MAAOlG,GAC/B,kBAAC,IAAD,CAAQmG,SAAUC,aAChB,kBAAC,EAAD,UAKRC,SAASC,eAAe,W","file":"static/js/main.0a94eca6.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n\nimport reducer from './reducers';\n\nconst logMiddleware = ({ getState }) => (next) => (action) => {\n  console.log(action.type, getState());\n  return next(action);\n};\n\nconst stringMiddleware = () => (next) => (action) => {\n  if (typeof action === 'string') {\n    return next({\n      type: action,\n    });\n  }\n\n  return next(action);\n};\n\nconst store = createStore(reducer, applyMiddleware(\n  thunkMiddleware,\n  stringMiddleware,\n  logMiddleware,\n));\n\n// An example of thunk\nconst delayedActionCreator = (timeout) => (dispatch) => {\n  setTimeout(() => dispatch({\n    type: 'DELAYED_ACTION',\n  }), timeout);\n};\n\nstore.dispatch(delayedActionCreator(3000));\n\nexport default store;\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const {\n    title,\n    author,\n    price,\n    coverImage,\n  } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button\n          onClick={onAddedToCart}\n          className=\"btn btn-info add-to-cart\">\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer,\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer,\n};\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (<Wrapped {...props}\n                     bookstoreService={bookstoreService}/>);\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","const booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST',\n  };\n};\n\nconst booksLoaded = (newBooks) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks,\n  };\n};\n\nconst booksError = (error) => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error,\n  };\n};\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId,\n  };\n};\n\nconst bookRemovedFromCart = (bookId) => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId,\n  };\n};\n\nconst allBooksRemovedFromCart = (bookId) => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId,\n  };\n};\n\n// without thunk\n// const fetchBooks = (bookstoreService, dispatch) => () => {\n//   dispatch(booksRequested());\n//   bookstoreService.getBooks()\n//     .then((data) => dispatch(booksLoaded(data)))\n//     .catch((err) => dispatch(booksError(err)));\n// };\n\n// thunk\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nexport {\n  fetchBooks,\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart,\n};\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","/* eslint-disable no-shadow */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport BookListItem from '../book-list-item';\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\n\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"book-list\">\n      {books.map((book) => {\n        return (\n          <li key={book.id}>\n            <BookListItem\n              book={book}\n              onAddedToCart={() => onAddedToCart(book.id)}/>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const {\n      books, loading, error, onAddedToCart,\n    } = this.props;\n\n    if (loading) {\n      return <Spinner/>;\n    }\n\n    if (error) {\n      return <ErrorIndicator/>;\n    }\n\n    return <BookList\n      books={books}\n      onAddedToCart={onAddedToCart}/>;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\n// without thunk\n// const mapDispatchToProps = (dispatch, { bookstoreService }) => {\n//   return {\n//     fetchBooks: fetchBooks(bookstoreService, dispatch),\n//     onAddedToCart: (id) => dispatch(bookAddedToCart(id)),\n//   };\n// };\n\n// thunk\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return {\n    ...bindActionCreators({\n      fetchBooks: fetchBooks(bookstoreService),\n      onAddedToCart: bookAddedToCart,\n    }, dispatch),\n  };\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps),\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp,\n  );\n};\n\nexport { compose };\n","/* eslint-disable object-curly-newline */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart,\n} from '../../actions';\n\nimport './shopping-cart-table.css';\n\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, price } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${price}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\">\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\">\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\">\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          { items.map(renderRow) }\n        </tbody>\n      </table>\n\n      <div className=\"total\">\n        Total: ${total}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal,\n  };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBooksRemovedFromCart,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from 'react';\nimport BookList from '../book-list';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return <div>Cart Page</div>;\n};\n\nexport default CartPage;\n","import ShopHeader from './shop-header';\n\nexport default ShopHeader;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport './shop-header.css';\n\nconst numItems = (listItems) => {\n  if (listItems.length === 0) {\n    return 0;\n  }\n\n  return listItems.reduce((accumulator, item) => accumulator + item.count, 0);\n};\n\nconst ShopHeader = ({ items = [], total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to=\"/\">\n        <div className=\"logo text-dark\">Bookshop</div>\n      </Link>\n      <Link to=\"/cart\">\n        <div className=\"shopping-cart\" href=\"#\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItems(items)} items (${total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal,\n  };\n};\n\nexport default connect(mapStateToProps)(ShopHeader);\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { HomePage, CartPage } from '../pages';\nimport ShopHeader from '../shop-header';\n\nimport './app.css';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader/>\n      <Switch>\n        <Route path=\"/\" component={HomePage} exact />\n\n        <Route path=\"/cart\" component={CartPage} />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false,\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","/* eslint-disable class-methods-use-this */\nexport default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg',\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg',\n    },\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.75) {\n          reject(new Error('Something bad happened'));\n        } else {\n          resolve(this.data);\n        }\n      }, 700);\n    });\n  }\n}\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null,\n      };\n\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null,\n      };\n\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload,\n      };\n\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","/* eslint-disable no-case-declarations */\nconst updateOrderTotal = (orderTotal, book, quantity) => {\n  return orderTotal + book.price * quantity;\n};\n\nconst updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1),\n    ];\n  }\n\n  if (idx === -1) {\n    return [\n      ...cartItems,\n      item,\n    ];\n  }\n\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1),\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const {\n    id = book.id,\n    count = 0,\n    title = book.title,\n    price = 0,\n  } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    price: price + quantity * book.price,\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList: { books }, shoppingCart: { cartItems, orderTotal } } = state;\n\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: updateOrderTotal(orderTotal, book, quantity),\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from './book-list';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action),\n  };\n};\n\nexport default reducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}